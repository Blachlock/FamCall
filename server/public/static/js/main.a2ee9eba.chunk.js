(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a(359)},152:function(e,t,a){},154:function(e,t,a){},354:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),s=a.n(r),c=(a(152),a(3)),i=a(6),o=a(8),u=a(7),m=a(9),h=(a(154),a(363)),d=a(362),p=a(144),f=a(360),E=a(18),v=a.n(E),g=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a,n,l,r){return t.service.post("/signup",{username:e,password:a,email:n,name:l,phone:r}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=v.a.create({baseURL:"http://localhost:4000/auth",withCredentials:!0})},b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new g,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(p.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?l.a.createElement("nav",{className:"nav-style"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(f.a,{to:"/profile"},"My Profile")),l.a.createElement("li",null,l.a.createElement(f.a,{to:"/calendar"},"My Calendar")),l.a.createElement("li",null,l.a.createElement("a",{class:"button is-link is-active is-small",onClick:this.handleLogout},"Cerrar sesi\xf3n"))),l.a.createElement("h2",null,"Bienvenid@, ",this.state.loggedInUser.username)):l.a.createElement("div",null,l.a.createElement("nav",{className:"nav-style"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(f.a,{to:"/signup"},"Registrarse")),l.a.createElement("li",null,l.a.createElement(f.a,{to:"/login"},"Iniciar sesi\xf3n")))))}}]),t}(n.Component),C=a(15),j=(a(98),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,l=a.state.email,r=a.state.name,s=a.state.phone;a.service.signup(t,n,l,r,s).then(function(e){a.setState({username:"",password:"",email:"",name:"",phone:""}),a.props.getUser(e.user)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(C.a)({},n,l))},a.state={username:"",password:"",email:"",name:"",phone:""},a.service=new g,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this;return l.a.createElement("div",null,l.a.createElement("h3",null,"Crea tu cuenta con nosotros:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("div",{class:"field"},l.a.createElement("label",{class:"label"},"Nombre de usuario"),l.a.createElement("div",{class:"control has-icons-left has-icons-right"},l.a.createElement("input",{class:"input is-success",type:"text",placeholder:"Text input",name:"username",value:this.state.username,onChange:function(e){return t.handleChange(e)}}),l.a.createElement("span",{class:"icon is-small is-left"},l.a.createElement("i",{class:"fas fa-user"})),l.a.createElement("span",{class:"icon is-small is-right"},l.a.createElement("i",{class:"fas fa-check"}))),l.a.createElement("p",{class:"help is-success"},"This username is available")),l.a.createElement("div",{class:"field"},l.a.createElement("label",{class:"label"},"Nombre real"),l.a.createElement("div",{class:"control"},l.a.createElement("input",{class:"input",type:"text",placeholder:"Text input",name:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}}))),l.a.createElement("div",{class:"field"},l.a.createElement("p",{class:"control has-icons-left"},l.a.createElement("input",{class:"input",type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:function(e){return t.handleChange(e)}}),l.a.createElement("span",{class:"icon is-small is-left"},l.a.createElement("i",{class:"fas fa-lock"})))),l.a.createElement("div",{class:"field"},l.a.createElement("label",{class:"label"},"Email"),l.a.createElement("div",{class:"control has-icons-left has-icons-right"},l.a.createElement("input",(e={class:"input is-danger",type:"email",placeholder:"Email input",value:"hello@",name:"email"},Object(C.a)(e,"value",this.state.email),Object(C.a)(e,"onChange",function(e){return t.handleChange(e)}),e)),l.a.createElement("span",{class:"icon is-small is-left"},l.a.createElement("i",{class:"fas fa-envelope"})),l.a.createElement("span",{class:"icon is-small is-right"},l.a.createElement("i",{class:"fas fa-exclamation-triangle"}))),l.a.createElement("p",{class:"help is-danger"},"This email is invalid")),l.a.createElement("div",{class:"field"},l.a.createElement("label",{class:"label"},"Tel\xe9fono"),l.a.createElement("div",{class:"control"},l.a.createElement("input",{class:"input",type:"text",placeholder:"Text input",name:"phone",value:this.state.phone,onChange:function(e){return t.handleChange(e)}}))),l.a.createElement("div",{class:"field"},l.a.createElement("div",{class:"control"},l.a.createElement("label",{class:"checkbox"},l.a.createElement("input",{type:"checkbox"}),"I agree to the ",l.a.createElement("a",{href:"#"},"terms and conditions")))),l.a.createElement("div",{class:"field is-grouped"},l.a.createElement("div",{class:"control"},l.a.createElement("button",{class:"button is-link"},"Submit")),l.a.createElement("div",{class:"control"},l.a.createElement("button",{class:"button is-text"},"Cancel")))))}}]),t}(n.Component)),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(C.a)({},n,l))},a.state={username:"",password:""},a.service=new g,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h3",null,"Por favor, inicia sesi\xf3n"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("fieldset",null,l.a.createElement("label",null,"Nombre de usuario:"),l.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Contrase\xf1a:"),l.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("input",{type:"submit",value:"Login"})),l.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{class:"tabs"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",null,l.a.createElement(f.a,{to:"/calendar/create"},"Crear Pareja:"))),l.a.createElement("li",null,l.a.createElement("a",null,l.a.createElement(f.a,{to:"/child/create"},"A\xf1adir hijo:")))))}}]),t}(n.Component),S=function e(){var t=this;Object(c.a)(this,e),this.sendInvite=function(e,a,n){return t.service.post("/sendInvite",{from:e,to:a,phone:n}).then(function(e){return e.data})},this.service=v.a.create({baseURL:"http://localhost:4000/calendar",withCredentials:!0})},w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(C.a)({},n,l))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.from,n=a.state.to,l=a.state.phone;a.service.sendInvite(t,n,l).then(function(e){"success"===e.status?(alert("Message Sent."),a.resetForm(),a.setState({from:t,to:n,phone:l,error:!1})):"fail"===e.status&&alert("Message failed to send.")}).catch(function(e){console.log(e),a.setState({from:t,to:n,phone:l,error:!0})})},a.state={from:a.props.userInSession._id,to:"",phone:""},a.service=new S,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"resetForm",value:function(){document.getElementById("contact-form").reset()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"col-sm-4 offset-sm-4"},l.a.createElement("form",{id:"contact-form",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"to",value:this.state.to,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})),l.a.createElement("span",{className:"icon is-small is-right"},l.a.createElement("i",{className:"fas fa-check"})))),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"number",placeholder:"Tel\xe9fono",name:"phone",value:this.state.phone,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-lock"})))),l.a.createElement("div",{class:"field is-grouped"},l.a.createElement("p",{class:"control"},l.a.createElement("a",{class:"button is-link",onClick:this.handleFormSubmit,type:"submit",value:"submit"},"Save changes")),l.a.createElement("p",{class:"control"},l.a.createElement(f.a,{class:"button",to:"/profile"},"Cancelar")))),l.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(n.Component),I=a(43),k=a.n(I),N=a(145),U=a.n(N),T=(a(354),function e(){var t=this;Object(c.a)(this,e),this.getCouple=function(){return t.service.get("/").then(function(e){return e.data})},this.getChildren=function(e){return t.service.get("/",{children:e}).then(function(e){return console.log(e),e.data})},this.service=v.a.create({baseURL:"http://localhost:4000/couple/getCouple",withCredentials:!0})}),D=(a(356),function(e){function t(e){var a;return Object(c.a)(this,t),console.log(e),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){a.getEvents()},a.getEvents=function(){return a.service.getCouple().then(function(e){var t=e.events.map(function(e,t){var a=e.startDate.split("-"),n=e.startTime.split(":"),l=parseFloat(a[0]),r=parseFloat(a[1]),s=parseFloat(a[2]),c=parseFloat(n[0]),i=parseFloat(n[0]),o=parseFloat("0"),u=e.endDate.split("-"),m=e.endTime.split(":"),h=parseFloat(u[0]),d=parseFloat(u[1]),p=parseFloat(u[2]),f=parseFloat(m[0]),E=parseFloat(m[0]),v=parseFloat("0");return{id:e._id,title:e.title,allDay:!1,start:new Date(l,r-1,s,c,i,o),end:new Date(h,d-1,p,f,E,v)}});return a.setState({calendarEvents:t,eventosLista:e.events})})},a.state={user:e.userInSession,eventosLista:[],calendarEvents:[{id:"",title:"",allDay:"",start:"",end:""}],localizer:k.a.momentLocalizer(U.a)},a.service=new T,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=Object.keys(k.a.Views).map(function(e){return k.a.Views[e]});return l.a.createElement("div",null,l.a.createElement("article",{class:"message is-primary",style:{marginBottom:"0px"}},l.a.createElement("div",{class:"message-body"},l.a.createElement("a",{class:"button is-info is-outlined"},l.a.createElement(f.a,{to:"/events/create"},"Crear recordatorio:")))),l.a.createElement("article",{class:"message"},l.a.createElement("div",{class:"message-body",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement(k.a,{events:this.state.calendarEvents,views:e,step:60,showMultiDayTimes:!0,localizer:this.state.localizer}))),this.state.eventosLista?this.state.eventosLista.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{className:"card"},l.a.createElement("header",{className:"card-header"},l.a.createElement("h3",{className:"card-header-title"},e.title),l.a.createElement("a",{href:"#",className:"card-header-icon","aria-label":"more options"},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fas fa-angle-down","aria-hidden":"true"})))),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("p",null,e.description),l.a.createElement("br",null),l.a.createElement("time",{dateTime:!0},e.startDate," - ",e.endDate),l.a.createElement("br",null),l.a.createElement("time",{dateTime:!0},e.startTime," - ",e.endTime))),l.a.createElement("footer",{className:"card-footer"},l.a.createElement("a",{href:"#",className:"card-footer-item"},"Edit"),l.a.createElement("a",{href:"#",className:"card-footer-item"},"Delete"))),l.a.createElement("br",null))}):"")}}]),t}(n.Component)),F=function e(){var t=this;Object(c.a)(this,e),this.postEvent=function(e,a,n,l,r,s,c,i){return t.service.post("/",{startDate:e,endDate:a,startTime:n,endTime:l,title:r,description:s,parentCreated:c,child:i}).then(function(e){return console.log(e),e.data})},this.getEvent=function(e,a,n,l,r,s,c,i){return t.service.get("/",{child:e,startDate:a,endDate:n,startTime:l,endTime:r,title:s,description:c,parentCreated:i}).then(function(e){return console.log(e),e.data})},this.service=v.a.create({baseURL:"http://localhost:4000/events",withCredentials:!0})},x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).getChildren=function(){v.a.get("http://localhost:4000/couple/getCouple",{withCredentials:!0}).then(function(e){return a.setState({children:e.data.child})},function(){}).catch(function(e){return console.log(e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.startDate,n=a.state.endDate,l=a.state.startTime,r=a.state.endTime,s=a.state.title,c=a.state.description,i=a.state.user,o=a.state.child;a.service.postEvent(t,n,l,r,s,c,i,o).then(function(e){a.setState({startDate:"",endDate:"",startTime:"",endTime:"",title:"",description:"",user:"",child:""})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){a.setState(Object(C.a)({},e.name,e.value))},a.state={startDate:"",endDate:"",startTime:"",endTime:"",title:"",description:"",user:e.userInSession._id,child:"",children:null},a.service=new F,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.getChildren()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h3",null,"Crea tu recordatorio:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("fieldset",null,l.a.createElement("label",null,"Evento para el ni\xf1o:"),l.a.createElement("select",{name:"child",className:"select-multiple",onChange:function(t){return e.handleChange(t.target)}},this.state.children?this.state.children.map(function(e,t){return l.a.createElement("option",{type:"text",key:t,name:"child",value:e._id},e.name)}):"")),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Fecha inicio:"),l.a.createElement("input",{type:"date",name:"startDate",value:this.state.startDate,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Fecha final:"),l.a.createElement("input",{type:"date",name:"endDate",value:this.state.endDate,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Hora inicio:"),l.a.createElement("input",{type:"time",name:"startTime",value:this.state.startTime,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Hora final:"),l.a.createElement("input",{type:"time",name:"endTime",value:this.state.endTime,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"T\xedtulo:"),l.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Descripci\xf3n:"),l.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t.target)}})),l.a.createElement("div",{class:"field is-grouped"},l.a.createElement("p",{class:"control"},l.a.createElement("a",{class:"button is-link",onClick:this.handleFormSubmit,type:"submit",value:"submit"},"Save changes")),l.a.createElement("p",{class:"control"},l.a.createElement(f.a,{class:"button",to:"/calendar"},"Cancelar")))))}}]),t}(n.Component),L=function e(){var t=this;Object(c.a)(this,e),this.postChild=function(e,a){return t.service.post("/",{name:e,birthday:a}).then(function(e){return console.log(e),e.data})},this.getChild=function(e,a){return t.service.get("/",{name:e,birthday:a}).then(function(e){return console.log(e),e.data})},this.service=v.a.create({baseURL:"http://localhost:4000/child",withCredentials:!0})},R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.name,n=a.state.birthday;a.service.postChild(t,n).then(function(e){console.log(e),a.setState({name:"",birthday:""})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(C.a)({},n,l))},a.state={name:"",birthday:""},a.service=new L,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h3",null,"A\xf1ade un hijo a tu cuenta:"),l.a.createElement("form",{onSubmit:this.handleFormSubmit},l.a.createElement("fieldset",null,l.a.createElement("label",null,"Nombre de ni\xf1o:"),l.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("fieldset",null,l.a.createElement("label",null,"Fecha de nacimiento:"),l.a.createElement("input",{type:"date",name:"birthday",value:this.state.birthday,onChange:function(t){return e.handleChange(t)}})),l.a.createElement("div",{class:"field is-grouped"},l.a.createElement("p",{class:"control"},l.a.createElement("a",{class:"button is-link",onClick:this.handleFormSubmit,type:"submit",value:"submit"},"Save changes")),l.a.createElement("p",{class:"control"},l.a.createElement(f.a,{class:"button",to:"/profile"},"Cancelar")))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new g,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(b,{userInSession:this.state.loggedInUser,logout:this.logout})),l.a.createElement("div",null,l.a.createElement(h.a,null,l.a.createElement(d.a,{exact:!0,path:"/calendar/create",render:function(){return l.a.createElement(w,{userInSession:e.state.loggedInUser,getUser:e.getTheUser})}}),l.a.createElement(d.a,{exact:!0,path:"/child/create",render:function(){return l.a.createElement(R,{userInSession:e.state.loggedInUser})}}),l.a.createElement(d.a,{exact:!0,path:"/profile",render:function(){return l.a.createElement(O,{userInSession:e.state.loggedInUser})}}),l.a.createElement(d.a,{exact:!0,path:"/calendar",render:function(){return l.a.createElement(D,{userInSession:e.state.loggedInUser})}}),l.a.createElement(d.a,{exact:!0,path:"/events/create",render:function(){return l.a.createElement(x,{userInSession:e.state.loggedInUser})}}))),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("br",null),l.a.createElement("div",null)):l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement(b,{userInSession:this.state.loggedInUser,logout:this.logout}),l.a.createElement(h.a,null,l.a.createElement(d.a,{exact:!0,path:"/signup",render:function(){return l.a.createElement(j,{getUser:e.getTheUser})}}),l.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return l.a.createElement(y,{getUser:e.getTheUser})}}))))}}]),t}(n.Component),A=a(361);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(A.a,null,l.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,2,1]]]);
//# sourceMappingURL=main.a2ee9eba.chunk.js.map